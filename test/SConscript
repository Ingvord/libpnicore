from os import path
import re
Import("test_env")


#need to use here prepend in order to avoid triggering the istallation process
sources_list = ["pniutilstest.cpp"]
sources_list.extend(["DBufferTest.cpp"])
sources_list.extend(["RBufferTest.cpp"])
sources_list.extend(["SBufferTest.cpp"])
sources_list.extend(["SizeTypeTest.cpp"])
sources_list.extend(["StaticCIndexMapTest.cpp"])
sources_list.extend(["IteratorTest.cpp"])
sources_list.extend(["IndexMapTest.cpp"])
sources_list.extend(["ArraySelectionTest.cpp"])
sources_list.extend(["SArrayTest.cpp"])
sources_list.extend(["ArrayViewSelectorTest.cpp"])
sources_list.extend(["DArrayTest.cpp"])
sources_list.extend(["NumArrayTest.cpp"])
sources_list.extend(["AddOperatorTest.cpp"])
sources_list.extend(["SubOperatorTest.cpp"])
sources_list.extend(["DivOperatorTest.cpp"])
sources_list.extend(["MultOperatorTest.cpp"])
sources_list.extend(["ResultTypeTraitTest.cpp"])
sources_list.extend(["IndexMapBaseTest.cpp"])
sources_list.extend(["BinaryTest.cpp"])
sources_list.extend(["TypeMapsTest.cpp"])
sources_list.extend(["ArrayViewTest.cpp"])
sources_list.extend(["SliceTest.cpp"])
sources_list.extend(["TypeClassTest.cpp"])
sources_list.extend(["TypeInfoTest.cpp"])
sources_list.extend(["configuration_test.cpp"])

bm_sources = ["iteratorbm.cpp"]

pniutils_test = test_env.Program("pniutilstest",sources_list)
iterbm = test_env.Program("iteratorbm",bm_sources)
multiindexbm = test_env.Program("multiindexbm",["multiindexbm.cpp"])
arithmeticbm = test_env.Program("arithmeticbm",["arithmeticbm.cpp"])
test_targets = [pniutils_test,iterbm,multiindexbm,arithmeticbm]

test_env.Alias("test",test_targets)
test_install = test_env.Install("$PREFIX/bin",test_targets)
test_env.Alias("test_install",test_install)
