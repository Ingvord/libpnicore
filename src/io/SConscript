import os.path as path

Import("build_env")


tiffsources = Glob("tiff/*.cpp")
           
sources = Glob("*.cpp")
sources.extend(Glob("cbf/*.cpp"))
if GetOption("with_tiff"):
    sources.extend(tiffsources)
sobjs = build_env.SharedObject(sources)
aobjs = build_env.StaticObject(sources)

hdr_inst_path = path.join(build_env["PREFIX"],"include/pni/core/io")
incpniutils_inst = build_env.Install(hdr_inst_path,Glob("*.hpp"))
cbfhdr_inst = build_env.Install(path.join(hdr_inst_path,"cbf"),Glob("cbf/*.hpp"))
tiffhdr_inst = build_env.Install(path.join(hdr_inst_path,"tiff"),Glob("tiff/*.hpp"))
build_env.Alias("install",[incpniutils_inst,cbfhdr_inst,tiffhdr_inst])

Return("sobjs aobjs")
