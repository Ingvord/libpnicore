import os.path as path

Import("build_env")


tiffsources = ["TIFFReader.cpp"]
tiffsources.extend(["tiff/IFD.cpp","tiff/IFDEntry.cpp","tiff/IFDEntryReader.cpp","tiff/StripReader.cpp"])
           
cbfsources = ["CBFReader.cpp","strutils.cpp","cbf/DectrisReader.cpp"]
sources = ["DataReader.cpp","ImageInfo.cpp","ImageReader.cpp","SpreadsheetReader.cpp"]
sources.extend(["FIOReader.cpp"])
sources.extend(["ColumnInfo.cpp"])
sources.extend(cbfsources)
sources.extend(tiffsources)
sobjs = build_env.SharedObject(sources)
aobjs = build_env.StaticObject(sources)

hdr_inst_path = path.join(build_env["PREFIX"],"include/pni/utils/io")
incpniutils_inst = build_env.Install(hdr_inst_path,Glob("*.hpp"))
cbfhdr_inst = build_env.Install(path.join(hdr_inst_path,"cbf"),Glob("cbf/*.hpp"))
tiffhdr_inst = build_env.Install(path.join(hdr_inst_path,"tiff"),Glob("tiff/*.hpp"))
build_env.Alias("install",[incpniutils_inst,cbfhdr_inst,tiffhdr_inst])

Return("sobjs aobjs")
